<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>AI å›é¥‹æ‘˜è¦</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 16px;
      line-height: 1.6;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .btn {
      display: inline-block;
      padding: 8px 12px;
      border-radius: 6px;
      text-decoration: none;
      border: 1px solid #007bff;
    }
  </style>
</head>
<body>
  <h2>AI å›é¥‹æ‘˜è¦</h2>
  <p>é€™æ˜¯æ ¹æ“šä½¿ç”¨è€…å°é€™é–“å»æ‰€çš„å›é¥‹ï¼Œç”± AI è‡ªå‹•æ•´ç†çš„æ‘˜è¦ã€‚</p>

  <div id="summary-card" class="card">
    <div id="status">è¼‰å…¥ä¸­â‹¯â‹¯</div>
    <pre id="summary-text" style="white-space: pre-wrap;"></pre>
  </div>

  <div class="card">
    <h3>å¹«å¿™ç•™ä¸‹ä½ çš„å›é¥‹ ğŸ™Œ</h3>
    <p>å¦‚æœä½ å‰›å‰›æœ‰ä½¿ç”¨é€™é–“å»æ‰€ï¼Œå¯ä»¥é»ä¸‹é¢çš„æŒ‰éˆ•å¡«å¯«å›é¥‹ï¼Œè®“è³‡æ–™æ›´å®Œæ•´ã€‚</p>
    <a href="{{ feedback_url }}" class="btn">å‰å¾€å›é¥‹è¡¨å–®</a>
  </div>

  <script>
    const apiUrl = "{{ api_url }}";

    fetch(apiUrl)
      .then(r => r.json())
      .then(data => {
        const statusEl = document.getElementById("status");
        const textEl   = document.getElementById("summary-text");

        if (!data.success) {
          statusEl.textContent = "è®€å–å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
          return;
        }

        // has_data = False ä»£è¡¨æ²’æœ‰ä»»ä½•å›é¥‹ â†’ é¡¯ç¤ºæ–‡å­—å°±å¥½ï¼Œä¸å‘¼å« AI
        if (!data.has_data) {
          statusEl.textContent = "";
          textEl.textContent = data.summary || "ç›®å‰é‚„æ²’æœ‰ä»»ä½•å›é¥‹è³‡æ–™ã€‚";
          return;
        }

        statusEl.textContent = "";
        textEl.textContent = data.summary || "ç›®å‰æ²’æœ‰å¯ç”¨çš„æ‘˜è¦å…§å®¹ã€‚";
      })
      .catch(err => {
        console.error(err);
        document.getElementById("status").textContent = "ç³»çµ±éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
      });
  </script>
</body>
</html>
