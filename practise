from math import radians, sin, cos, sqrt, atan2

# Haversine å…¬å¼ï¼ˆè¨ˆç®—å…©å€‹ç¶“ç·¯åº¦ä¹‹é–“çš„è·é›¢ï¼‰
def haversine_distance(coord1, coord2):
    R = 6371  # åœ°çƒåŠå¾‘ï¼ˆå…¬é‡Œï¼‰
    lat1, lon1 = map(radians, coord1)
    lat2, lon2 = map(radians, coord2)
    
    dlat = lat2 - lat1
    dlon = lon2 - lon1

    a = sin(dlat / 2) ** 2 + cos(lat1) * cos(lat2) * sin(dlon / 2) ** 2
    c = 2 * atan2(sqrt(a), sqrt(1 - a))

    return R * c  # å›å‚³è·é›¢ï¼ˆå…¬é‡Œï¼‰

# å»æ‰€è³‡æ–™
toilets = {
    "Aå»æ‰€": (25.0330, 121.5654),  # (ç·¯åº¦, ç¶“åº¦) å°åŒ— 101
    "Bå»æ‰€": (24.1477, 120.6736),  # å°ä¸­
    "Cå»æ‰€": (22.6273, 120.3014)   # é«˜é›„
}

# è®“ä½¿ç”¨è€…è¼¸å…¥ GPS ä½ç½®
user_lat = float(input("è«‹è¼¸å…¥ä½ çš„ç·¯åº¦: "))
user_lon = float(input("è«‹è¼¸å…¥ä½ çš„ç¶“åº¦: "))
user_location = (user_lat, user_lon)

# æ‰¾å‡ºæœ€è¿‘çš„å»æ‰€
def find_nearest_toilet(user_location, toilets):
    nearest = min(toilets, key=lambda t: haversine_distance(user_location, toilets[t]))
    return nearest, haversine_distance(user_location, toilets[nearest])

nearest_toilet, distance = find_nearest_toilet(user_location, toilets)
print(f"ğŸš» æœ€è¿‘çš„å»æ‰€ï¼š{nearest_toilet}ï¼Œè·é›¢ç´„ {distance:.2f} å…¬é‡Œ")
